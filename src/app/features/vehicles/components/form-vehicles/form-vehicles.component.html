<main>
  <div class="content-container">
    <button class="back-button" routerLink="/vehicles/view">
      <span class="material-symbols-outlined">arrow_back</span>
      Voltar
    </button>

    <form [formGroup]="formulario" novalidate>
      <div class="form-group">
        <label>Tipo <span class="required">*</span></label>
        <select formControlName="vehicleType" class="input-field">
          <option disabled hidden value="">Selecione o Tipo de Veículo</option>
          <option value="carro">Carro</option>
          <option value="moto">Moto</option>
        </select>
      </div>

      <div class="form-group">
        <label>Modelo <span class="required">*</span></label>
        <input formControlName="model" type="text" placeholder="Modelo do Veículo" class="input-field" />
      </div>

      <div class="form-group">
        <label>Placa <span class="required">*</span></label>
        <input formControlName="licensePlate" type="text" placeholder="Placa do Veículo" class="input-field" />
      </div>

      <div class="form-group">
        <label>Número da Vaga <span class="required">*</span></label>
        <input formControlName="carSpace" type="number" placeholder="Número da Vaga" min="1" max="500" class="input-field" />
      </div>

      <div class="form-group">
        <label>Foto do Veículo <span class="required">*</span></label>
        <div class="upload-box" (dragover)="onDragOver($event)" (drop)="onDrop($event)">
          <input #fileInput type="file" (change)="onFileSelected($event)" accept="image/*" style="display: none" />

          <ng-container *ngIf="!previewImg">
            <button type="button" class="add-img" (click)="openImgSelector(fileInput)">Buscar imagem</button>
            <p>Ou arraste a imagem aqui</p>
          </ng-container>

          <ng-container *ngIf="previewImg">
            <button type="button" class="remove-img" (click)="removeImg()" aria-label="Remover imagem">
              <span class="material-symbols-outlined" style="color: red; font-size: 24px">delete</span>
            </button>
            <img [src]="previewImg" alt="Preview" style="max-width: 350px; object-fit: cover" />
          </ng-container>
        </div>
      </div>
    </form>

    <button class="submit-button" (click)="saveVehicle()">
      {{ vehicleId ? 'Editar Veículo' : 'Cadastrar Veículo' }}
    </button>
  </div>
</main>