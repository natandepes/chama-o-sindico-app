<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">

<main>
  <div class="content-container">
    <button class="back-button" routerLink="/warnings/view">
      <span class="material-symbols-outlined">arrow_back</span>
      Voltar
    </button>

    <form [formGroup]="warningForm" (ngSubmit)="onSubmit()" novalidate>
      <h1 style="font-size: 1.5rem; font-weight: 700; color: #334155;">Criar Aviso</h1>

      <div class="form-group">
        <label for="title">Título <span class="required">*</span></label>
        <input
          type="text"
          id="title"
          formControlName="title"
          placeholder="Ex: Piscina em manutenção"
          class="input-field"
        />
      </div>

      <div class="form-group">
        <label for="description">Descrição <span class="required">*</span></label>
        <textarea
          id="description"
          formControlName="description"
          placeholder="Descreva o aviso..."
          rows="4"
          class="input-field"
        ></textarea>
      </div>

      <div class="form-group">
        <label>Enviar para <span class="required">*</span></label>
        <select formControlName="targetType" class="input-field">
          <option [value]="'all'">Todos os moradores</option>
          <option [value]="'specific'">Morador específico</option>
        </select>
      </div>

      <div class="form-group" *ngIf="warningForm.get('targetType')?.value === 'specific'">
        <label for="residentId">Selecionar morador <span class="required">*</span></label>
        <select formControlName="residentId" class="input-field">
          <option [value]="''" disabled>Selecione um morador</option>
          <option *ngFor="let resident of residents" [value]="resident.id">
            {{ resident.name }} - Apto {{ resident.apartmentNumber }}
          </option>
        </select>
      </div>

      <button class="submit-button" type="submit" [disabled]="warningForm.invalid">
        Criar Aviso
      </button>
    </form>
  </div>
</main>
